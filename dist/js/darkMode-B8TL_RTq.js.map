{"version":3,"file":"darkMode-B8TL_RTq.js","sources":["../../assets/js/dark-mode-toggle.js"],"sourcesContent":["/**\n * Dark Mode Toggle ‚Äî persists preference in localStorage.\n *\n * Reads OS preference via prefers-color-scheme, allows explicit toggle\n * via a button with class \"dark-mode-toggle\", and persists the choice.\n *\n * @package Hoplytics\n */\n\n(function () {\n    'use strict';\n\n    const STORAGE_KEY = 'hoplytics-theme';\n    const html = document.documentElement;\n\n    /**\n     * Get the current effective theme.\n     * Priority: localStorage > OS preference > 'light'\n     */\n    const getPreferred = () => {\n        const stored = localStorage.getItem(STORAGE_KEY);\n        if (stored === 'dark' || stored === 'light') return stored;\n\n        if (window.matchMedia?.('(prefers-color-scheme: dark)').matches) {\n            return 'dark';\n        }\n\n        return 'light';\n    };\n\n    /**\n     * Apply theme to <html> and update toggle button icon.\n     */\n    const apply = (theme) => {\n        html.setAttribute('data-theme', theme);\n\n        // Update all toggle button icons\n        document.querySelectorAll('.dark-mode-toggle').forEach((btn) => {\n            btn.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';\n            btn.setAttribute('aria-label',\n                theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'\n            );\n        });\n    };\n\n    // Apply on load (before paint, since this runs in <head> or early body)\n    apply(getPreferred());\n\n    // Listen for toggle clicks\n    document.addEventListener('click', (e) => {\n        const btn = e.target.closest('.dark-mode-toggle');\n        if (!btn) return;\n\n        const current = html.getAttribute('data-theme') || getPreferred();\n        const next = current === 'dark' ? 'light' : 'dark';\n\n        localStorage.setItem(STORAGE_KEY, next);\n        apply(next);\n    });\n\n    // Listen for OS preference changes (when no explicit choice stored)\n    window.matchMedia?.('(prefers-color-scheme: dark)').addEventListener('change', (e) => {\n        if (!localStorage.getItem(STORAGE_KEY)) {\n            apply(e.matches ? 'dark' : 'light');\n        }\n    });\n})();\n"],"names":["_a","STORAGE_KEY","html","getPreferred","stored","apply","theme","btn","e","next"],"mappings":"CASC,UAAY,CATb,IAAAA,EAYI,MAAMC,EAAc,kBACdC,EAAO,SAAS,gBAMhBC,EAAe,IAAM,CAnB/B,IAAAH,EAoBQ,MAAMI,EAAS,aAAa,QAAQH,CAAW,EAC/C,OAAIG,IAAW,QAAUA,IAAW,QAAgBA,GAEhDJ,EAAA,OAAO,aAAP,MAAAA,EAAA,YAAoB,gCAAgC,QAC7C,OAGJ,OACX,EAKMK,EAASC,GAAU,CACrBJ,EAAK,aAAa,aAAcI,CAAK,EAGrC,SAAS,iBAAiB,mBAAmB,EAAE,QAASC,GAAQ,CAC5DA,EAAI,YAAcD,IAAU,OAAS,KAAO,KAC5CC,EAAI,aAAa,aACbD,IAAU,OAAS,uBAAyB,qBAC5D,CACQ,CAAC,CACL,EAGAD,EAAMF,EAAY,CAAE,EAGpB,SAAS,iBAAiB,QAAUK,GAAM,CAEtC,GAAI,CADQA,EAAE,OAAO,QAAQ,mBAAmB,EACtC,OAGV,MAAMC,GADUP,EAAK,aAAa,YAAY,GAAKC,EAAY,KACtC,OAAS,QAAU,OAE5C,aAAa,QAAQF,EAAaQ,CAAI,EACtCJ,EAAMI,CAAI,CACd,CAAC,GAGDT,EAAA,OAAO,aAAP,MAAAA,EAAA,YAAoB,gCAAgC,iBAAiB,SAAWQ,GAAM,CAC7E,aAAa,QAAQP,CAAW,GACjCI,EAAMG,EAAE,QAAU,OAAS,OAAO,CAE1C,EACJ,GAAC"}