{"version":3,"file":"animations-DxCJYdJy.js","sources":["../../assets/js/animations.js"],"sourcesContent":["/**\n * Scroll Animations — Intersection Observer powered.\n *\n * Adds 'is-visible' class to elements with [data-animate] or [data-stagger]\n * when they enter the viewport. Also handles number counter animations.\n *\n * @package Hoplytics\n */\n\n(function () {\n    'use strict';\n\n    // ─── Scroll-triggered reveal ───\n\n    const observerOptions = {\n        root: null,\n        rootMargin: '0px 0px -50px 0px',\n        threshold: 0.1,\n    };\n\n    const revealObserver = new IntersectionObserver((entries) => {\n        entries.forEach((entry) => {\n            if (entry.isIntersecting) {\n                entry.target.classList.add('is-visible');\n                revealObserver.unobserve(entry.target);\n            }\n        });\n    }, observerOptions);\n\n    // ─── Number Counter Animation ───\n\n    function animateNumber(el) {\n        const target = parseInt(el.dataset.countTo, 10);\n        if (isNaN(target)) return;\n\n        const suffix = el.dataset.countSuffix || '';\n        const prefix = el.dataset.countPrefix || '';\n        const duration = parseInt(el.dataset.countDuration, 10) || 2000;\n        const startTime = performance.now();\n\n        function update(currentTime) {\n            const elapsed = currentTime - startTime;\n            const progress = Math.min(elapsed / duration, 1);\n            // Ease-out cubic\n            const eased = 1 - Math.pow(1 - progress, 3);\n            const current = Math.round(target * eased);\n            el.textContent = prefix + current.toLocaleString() + suffix;\n\n            if (progress < 1) {\n                requestAnimationFrame(update);\n            }\n        }\n\n        requestAnimationFrame(update);\n    }\n\n    const counterObserver = new IntersectionObserver((entries) => {\n        entries.forEach((entry) => {\n            if (entry.isIntersecting) {\n                animateNumber(entry.target);\n                counterObserver.unobserve(entry.target);\n            }\n        });\n    }, { threshold: 0.3 });\n\n    // ─── Typing Animation ───\n\n    function initTypingAnimation(el) {\n        const phrases = JSON.parse(el.dataset.typing || '[]');\n        if (!phrases.length) return;\n\n        let phraseIndex = 0;\n        let charIndex = 0;\n        let isDeleting = false;\n        let speed = 80;\n\n        function type() {\n            const currentPhrase = phrases[phraseIndex];\n\n            if (isDeleting) {\n                el.textContent = currentPhrase.substring(0, charIndex - 1);\n                charIndex--;\n                speed = 40;\n            } else {\n                el.textContent = currentPhrase.substring(0, charIndex + 1);\n                charIndex++;\n                speed = 80;\n            }\n\n            if (!isDeleting && charIndex === currentPhrase.length) {\n                // Pause before deleting\n                speed = 2000;\n                isDeleting = true;\n            } else if (isDeleting && charIndex === 0) {\n                isDeleting = false;\n                phraseIndex = (phraseIndex + 1) % phrases.length;\n                speed = 300;\n            }\n\n            setTimeout(type, speed);\n        }\n\n        type();\n    }\n\n    // ─── Reading Progress Bar ───\n\n    function initReadingProgress() {\n        const bar = document.querySelector('.reading-progress-bar');\n        if (!bar) return;\n\n        const article = document.querySelector('article, .entry-content, main');\n        if (!article) return;\n\n        window.addEventListener('scroll', () => {\n            const scrollTop = window.scrollY;\n            const articleTop = article.offsetTop;\n            const articleHeight = article.offsetHeight;\n            const windowHeight = window.innerHeight;\n            const progress = Math.min(Math.max((scrollTop - articleTop) / (articleHeight - windowHeight), 0), 1);\n            bar.style.transform = `scaleX(${progress})`;\n        }, { passive: true });\n    }\n\n    // ─── Initialize ───\n\n    function init() {\n        // Respect prefers-reduced-motion\n        const reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\n        if (reducedMotion) {\n            // Show everything immediately\n            document.querySelectorAll('[data-animate], [data-stagger]').forEach((el) => {\n                el.classList.add('is-visible');\n            });\n        } else {\n            // Observe animations\n            document.querySelectorAll('[data-animate], [data-stagger]').forEach((el) => {\n                revealObserver.observe(el);\n            });\n        }\n\n        // Counter animations\n        document.querySelectorAll('[data-count-to]').forEach((el) => {\n            counterObserver.observe(el);\n        });\n\n        // Typing animations\n        document.querySelectorAll('[data-typing]').forEach((el) => {\n            initTypingAnimation(el);\n        });\n\n        // Reading progress\n        initReadingProgress();\n    }\n\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', init);\n    } else {\n        init();\n    }\n})();\n"],"names":["observerOptions","revealObserver","entries","entry","animateNumber","el","target","suffix","prefix","duration","startTime","update","currentTime","elapsed","progress","eased","current","counterObserver","initTypingAnimation","phrases","phraseIndex","charIndex","isDeleting","speed","type","currentPhrase","initReadingProgress","bar","article","scrollTop","articleTop","articleHeight","windowHeight","init"],"mappings":"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"}